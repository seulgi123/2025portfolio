<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Infant:ital,wght@0,300..700;1,300..700&display=swap" rel="stylesheet">
    <style>
        * {margin: 0;padding: 0;}
        .lsg-portfolio-wrap {background: #222;}
        .section-intro {height: 1400vh;}
        .section-intro__group {height: 1000vh;}
        .work-period {height: 100vh;position: sticky;top: 0;}
        .work-period .work-period__year-group {position: absolute;top: 50%;left: 50%;opacity: 0.1;transform: translate(-50%, -50%);transition: opacity 0.1s linear;}
        .work-period .work-period__start-year:after {content: '';background: url(./img/dashed_line.png) 0 0 no-repeat;display: inline-block;width: var(--line-width, 0px);height: 20px;transition: all 0.2s;margin: 0 0.6vw;}
        .work-period span {font-family: "Cormorant Infant", serif;font-size: 50px;color: #fff;font-weight: 600;}
        .history-career {height: 100vh;position: sticky;top: 0;text-align: center;opacity: 0;}
        .history-career__container {position: relative;height: 100vh;}
        .history-career__item {position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);z-index: 2;}
        .history-career__item span {display: block;color: #fff;font-size: 20px;}
        .history-career__item span.history-career__year {font-family: "Cormorant Infant", serif;font-size: 50px;font-weight: 700;}
        .history-career .history-career__background {position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%) rotate(0deg);transition: all 0.2s;z-index: 1;opacity: 0.4;}
        .history-career__background line {}
        .history-work {opacity: 0;}
        .history-work__container {padding: 0 18vw;}
        .history-work__item {display: flex;flex-wrap: wrap;justify-content: space-between;margin-bottom: 30vw;gap: 20vw 0;}
        .history-work .history-work__img {width: 25vw;}
        .history-work .history-work__img:nth-child(2) {width: 20vw;margin: 15vw 5vw 2vw 2vw;}
        .history-work .history-work__img:nth-child(3) {width: 20vw;}
        .history-work .history-work__img img {width: 100%;}

    </style>
</head>
<body>
    <div class="lsg-portfolio-wrap">
        <div class="section-intro">
            <div class="section-intro__group">
                <section class="work-period">
                    <div class="work-period__year-group">
                        <span class="work-period__start-year">2018</span>
                        <span class="work-period__end-year">2025</span>
                    </div>
                </section>
                <section class="history-career">
                    <div class="history-career__container">
                        <div class="history-career__item">
                            <span class="history-career__company">(주)어디어디</span>
                            <span class="history-career__year">2018~2022</span>
                            <span class="history-career__role">에이전시</span>
                        </div>
                        <!-- <img class="history-career__background" src="./img/history_circle_bg.png" alt="원 배경"> -->
                        <div class="history-career__background">
                            <svg width="722" height="722" viewBox="0 0 722 722" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="361" cy="361" r="256" fill="white" fill-opacity="0.2"/>
                                <circle cx="361" cy="361" r="255.5" stroke="white" stroke-opacity="0.4"/>
                                <circle cx="361" cy="361" r="177" fill="white" fill-opacity="0.3"/>
                                <line x1="360.5" y1="106" x2="360.5" y2="123" stroke="white"/>
                                <line x1="394.703" y1="108.237" x2="392.423" y2="125.083" stroke="white"/>
                                <line x1="426.516" y1="114.56" x2="422.116" y2="130.98" stroke="white"/>
                                <line x1="458.974" y1="125.572" x2="452.412" y2="141.255" stroke="white"/>
                                <line x1="488.067" y1="139.914" x2="479.567" y2="154.636" stroke="white"/>
                                <line x1="516.569" y1="158.952" x2="506.172" y2="172.401" stroke="white"/>
                                <line x1="540.959" y1="180.334" x2="528.938" y2="192.355" stroke="white"/>
                                <line x1="563.562" y1="206.101" x2="550.038" y2="216.401" stroke="white"/>
                                <line x1="567.364" y1="242.433" x2="582.086" y2="233.933" stroke="white"/>
                                <line x1="581.401" y1="271.18" x2="597.13" y2="264.731" stroke="white"/>
                                <line x1="591.02" y1="299.884" x2="607.44" y2="295.484" stroke="white"/>
                                <line x1="597.138" y1="331.284" x2="614.001" y2="329.126" stroke="white"/>
                                <line x1="599" y1="361.5" x2="616" y2="361.5" stroke="white"/>
                                <line x1="596.783" y1="393.414" x2="613.629" y2="395.694" stroke="white"/>
                                <line x1="590.761" y1="423.082" x2="607.182" y2="427.482" stroke="white"/>
                                <line x1="360.5" y1="599" x2="360.5" y2="616" stroke="white"/>
                                <line x1="106" y1="361.5" x2="123" y2="361.5" stroke="white"/>
                                <line x1="233.067" y1="140.414" x2="241.567" y2="155.136" stroke="white"/>
                                <line x1="479.567" y1="567.364" x2="488.067" y2="582.086" stroke="white"/>
                                <line x1="140.414" y1="488.933" x2="155.136" y2="480.433" stroke="white"/>
                                <line x1="294.518" y1="114.818" x2="298.918" y2="131.239" stroke="white"/>
                                <line x1="422.116" y1="591.02" x2="426.516" y2="607.44" stroke="white"/>
                                <line x1="114.818" y1="427.482" x2="131.239" y2="423.082" stroke="white"/>
                                <line x1="298.918" y1="590.761" x2="294.518" y2="607.182" stroke="white"/>
                                <line x1="114.559" y1="295.484" x2="130.98" y2="299.884" stroke="white"/>
                                <line x1="241.567" y1="566.864" x2="233.067" y2="581.586" stroke="white"/>
                                <line x1="566.864" y1="480.433" x2="581.586" y2="488.933" stroke="white"/>
                                <line x1="139.914" y1="233.933" x2="154.636" y2="242.433" stroke="white"/>
                                <line x1="192.355" y1="528.938" x2="180.334" y2="540.959" stroke="white"/>
                                <line x1="528.938" y1="529.645" x2="540.959" y2="541.666" stroke="white"/>
                                <line x1="180.334" y1="181.041" x2="192.355" y2="193.062" stroke="white"/>
                                <line x1="328.586" y1="596.783" x2="326.306" y2="613.629" stroke="white"/>
                                <line x1="108.237" y1="327.297" x2="125.083" y2="329.577" stroke="white"/>
                                <line x1="263.806" y1="125.249" x2="270.255" y2="140.978" stroke="white"/>
                                <line x1="450.82" y1="581.401" x2="457.269" y2="597.13" stroke="white"/>
                                <line x1="125.249" y1="458.194" x2="140.978" y2="451.745" stroke="white"/>
                                <line x1="328.135" y1="108.126" x2="330.292" y2="124.989" stroke="white"/>
                                <line x1="390.716" y1="597.138" x2="392.874" y2="614.001" stroke="white"/>
                                <line x1="108.126" y1="393.865" x2="124.989" y2="391.708" stroke="white"/>
                                <line x1="268.665" y1="580.359" x2="262.103" y2="596.042" stroke="white"/>
                                <line x1="580.359" y1="453.335" x2="596.042" y2="459.897" stroke="white"/>
                                <line x1="125.572" y1="263.026" x2="141.254" y2="269.588" stroke="white"/>
                                <line x1="215.037" y1="548.987" x2="204.64" y2="562.437" stroke="white"/>
                                <line x1="548.987" y1="506.963" x2="562.436" y2="517.36" stroke="white"/>
                                <line x1="158.952" y1="205.431" x2="172.401" y2="215.828" stroke="white"/>
                                <line x1="171.356" y1="504.804" x2="157.832" y2="515.104" stroke="white"/>
                                <line x1="504.804" y1="550.644" x2="515.104" y2="564.168" stroke="white"/>
                                <line x1="206.101" y1="158.438" x2="216.401" y2="171.962" stroke="white"/>
                            </svg>
                        </div>
                    </div>
                </section>
            </div>
            <section class="history-work">
                <div class="history-work__container">
                    <div class="history-work__item">
                        <div class="history-work__img"><img src="./img/port_img1.jpg" alt="작업물 이미지"></div>
                        <div class="history-work__img"><img src="./img/port_img2.jpg" alt="작업물 이미지"></div>
                        <div class="history-work__img"><img src="./img/port_img3.jpg" alt="작업물 이미지"></div>
                        <div class="history-work__img"><img src="./img/port_img2.jpg" alt="작업물 이미지"></div>
                        <div class="history-work__img"><img src="./img/port_img3.jpg" alt="작업물 이미지"></div>
                    </div>
                    <div class="history-work__item">
                        <div class="history-work__img"><img src="./img/port_img1.jpg" alt="작업물 이미지"></div>
                        <div class="history-work__img"><img src="./img/port_img2.jpg" alt="작업물 이미지"></div>
                        <div class="history-work__img"><img src="./img/port_img3.jpg" alt="작업물 이미지"></div>
                        <div class="history-work__img"><img src="./img/port_img2.jpg" alt="작업물 이미지"></div>
                        <div class="history-work__img"><img src="./img/port_img3.jpg" alt="작업물 이미지"></div>
                    </div>
                </div>
            </section>
        </div>
    </div>
    
    <script>


        const workPeriodYear = document.querySelector('.work-period__year-group');
        const workPeriedStartYear = document.querySelector('.work-period__start-year');
        const historyCareer = document.querySelector('.history-career');
        const historyWork = document.querySelector('.history-work');

        // 연도 스크롤 애니메이션
        const yearFadeInEnd = 700;       // 0~700px 동안 나타남
        const yearFadeOutStart = 2000;   // 2000px부터 사라지기 시작
        const yearFadeOutDuration = 400; // 400px 구간 동안 사라짐

        // 선 애니메이션
        const lineMaxWidth = 200;   // 라인 최종 늘어날 길이(px)
        const lineStartOffset = 500; // 라인 500px 스크롤부터 시작
        const lineDuration = 1200;   // 라인 1200px 스크롤 구간 동안 선이 늘어남

        
        const historyFadeInStart = 2000;   // 2000px부터 시작
        const historyFadeInDuration = 400; // 400px 구간 동안 나타남

        window.addEventListener('scroll', () => {
            let windowScroll = window.scrollY;

            // 연도 opacity 모션
            let opacity = 0;

            if (windowScroll <= yearFadeInEnd) {
                // 0 ~ 700px: 0 -> 1
                opacity = windowScroll / yearFadeInEnd;
            } else if (windowScroll < yearFadeOutStart) {
                // 700 ~ 1200px: 1 유지
                opacity = 1;
            } else {
                // 1200 ~ 1800px: 1 -> 0
                opacity = 1 - (windowScroll - yearFadeOutStart) / yearFadeOutDuration;
                if (opacity < 0) opacity = 0;
            }
            workPeriodYear.style.opacity = opacity;

            // 라인 width값 스크롤 모션
            let lineProgress = (windowScroll - lineStartOffset) / lineDuration;
            if (lineProgress < 0) lineProgress = 0;
            if (lineProgress > 1) lineProgress = 1;
            const lineWidth = lineMaxWidth * lineProgress;
            workPeriedStartYear.style.setProperty('--line-width', `${lineWidth}px`);


            // 'windowScroll / 3000'은 값이 0부터 시작해서 '0.001, 0.006, 0.013....'와 같이 늘어남 그렇게 스크롤이 3000px에 왔을 때 1이 됨 (3000/3000은 1이니까)
            // 3000은 애니메이션이 진행되는 거리(=duration)
            // 근데 시작점이 0이 아닌 경우 '(windowScroll - 시작점) / 1000'을 하면 시작점까지는 계속 음수였다가 2400부터 0이 되고 2400이상에서 양수로 늘어남 
            // 스크롤이 시작점 이전에서는 progress 값이 음수(→실제로는 0으로 clamp), 시작점에서 0이 되고, duration만큼 스크롤 후 1이 된다. 이후엔 1로 고정된다.
            let careerOpacity = (windowScroll - 2400) / 1000;

            // 값을 깔끔하게 나오게 하기 위해 음수일 때는 0으로 고정, 1 이상 일때는 1로 고정
            if (careerOpacity < 0) careerOpacity = 0;
            if (careerOpacity > 1) careerOpacity = 1;
            historyCareer.style.opacity = careerOpacity;
        
        });
    </script>
</body>
</html>